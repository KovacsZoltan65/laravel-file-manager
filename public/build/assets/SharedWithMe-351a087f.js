import{A as k}from"./AuthenticatedLayout-b94a33ce.js";import{j as c,i as w,m as C,p as V,c as $,w as j,o as i,b as a,a as u,u as M,t as r,f as p,q as S,F as I,g as O,n as B,d as F}from"./app-ddfa9cd8.js";import{h as N,_ as U}from"./http-helper-3f5fbdde.js";import{_ as f}from"./Checkbox-55a340b2.js";import{_ as A}from"./DownloadFilesButton-3dc50cd8.js";import"./ApplicationLogo-05e4da24.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./SecondaryButton-af50fffc.js";import"./TextInput-65742199.js";import"./PrimaryButton-683c0c78.js";const E={class:"flex items-center justify-end p-1 mb-3"},L={class:"flex-1 overflow-auto"},q={class:"min-w-full"},z={class:"bg-gray-100 border-b"},D={class:"text-sm font-medium text-gray-900 px-6 py-4 text-left w-[30px] max-w-[30px] pr-0"},G={class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},T={class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},W=["onClick"],H={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 w-[30px] max-w-[30px] pr-0"},J={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 flex items-center"},K={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},P={key:0,class:"py-8 text-center text-sm text-gray-400"},oe={__name:"SharedWithMe",props:{files:Object,folder:Object,ancestors:Object},setup(v){const d=v,o=c(!1),l=c({}),x=c(null),s=c({data:d.files.data,next:d.files.links.next}),_=w(()=>Object.entries(l.value).filter(e=>e[1]).map(e=>e[0]));function g(){console.log("load more"),console.log(s.value.next),s.value.next!==null&&N(s.value.next).then(e=>{s.value.data=[...s.value.data,...e.data],s.value.next=e.links.next})}function b(){s.value.data.forEach(e=>{l.value[e.id]=o.value})}function y(e){l.value[e.id]=!l.value[e.id],h(e)}function h(e){if(!l.value[e.id])o.value=!1;else{let n=!0;for(let t of s.value.data)if(!l.value[t.id]){n=!1;break}o.value=n}}return C(()=>{s.value={data:d.files.data,next:d.files.links.next}}),V(()=>{new IntersectionObserver(n=>n.forEach(t=>t.isIntersecting&&g()),{rootMargin:"-250px 0px 0px 0px"}).observe(x.value)}),(e,n)=>(i(),$(k,null,{default:j(()=>[a("nav",E,[a("div",null,[u(A,{all:o.value,ids:M(_),class:"mr-2","shared-with-me":!0},null,8,["all","ids"])])]),a("div",L,[a("table",q,[a("thead",z,[a("tr",null,[a("th",D,[u(f,{onChange:b,checked:o.value,"onUpdate:checked":n[0]||(n[0]=t=>o.value=t)},null,8,["checked"])]),a("th",G,r(e.$t("name")),1),a("th",T,r(e.$t("path")),1)])]),a("tbody",null,[(i(!0),p(I,null,S(s.value.data,t=>(i(),p("tr",{key:t.id,onClick:m=>y(t),class:B(["border-b transition duration-300 ease-in-out hover:bg-blue-100 cursor-pointer",l.value[t.id]||o.value?"bg-blue-50":"bg-white"])},[a("td",H,[u(f,{onChange:m=>h(t),modelValue:l.value[t.id],"onUpdate:modelValue":m=>l.value[t.id]=m,checked:l.value[t.id]||o.value},null,8,["onChange","modelValue","onUpdate:modelValue","checked"])]),a("td",J,[u(U,{file:t},null,8,["file"]),F(" "+r(t.name),1)]),a("td",K,r(t.path),1)],10,W))),128))])]),s.value.data.length?O("",!0):(i(),p("div",P,r(e.$t("folder_is_empty")),1)),a("div",{ref_key:"loadMoreIntersect",ref:x},null,512)])]),_:1}))}};export{oe as default};
