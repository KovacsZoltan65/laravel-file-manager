import{s as $,a as I,A as F}from"./AuthenticatedLayout-b94a33ce.js";import{J as B,v as V,j as m,o as p,f as g,b as l,d as b,a as i,F as w,t as f,i as M,m as A,p as D,c as q,w as L,u as C,q as N,g as O,n as E}from"./app-ddfa9cd8.js";import{h as U,_ as z}from"./http-helper-3f5fbdde.js";import{_ as S}from"./Checkbox-55a340b2.js";import{_ as j}from"./ConfirmationDialog-98f44991.js";import"./ApplicationLogo-05e4da24.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./SecondaryButton-af50fffc.js";import"./TextInput-65742199.js";import"./PrimaryButton-683c0c78.js";import"./DangerButton-92bf9790.js";const R=l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-2"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"})],-1),P={__name:"RestoreFilesButton",props:{allSelected:{type:Boolean,required:!1,default:!1},selectedIds:{type:Array,required:!1}},emits:["restore"],setup(h,{emit:n}){const e=h;B();const t=V({all:null,ids:[],parent_id:null}),r=m(!1);function a(){if(!e.allSelected&&!e.selectedIds.length){$("Please select at least one file to restore");return}r.value=!0}function c(){r.value=!1}function v(){e.allSelected?t.all=!0:t.ids=e.selectedIds,t.post(route("file.restore"),{onSuccess:()=>{r.value=!1,n("restore"),I("Selected files have been restored")}})}return(u,x)=>(p(),g(w,null,[l("button",{onClick:a,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-blue-500 dark:focus:text-white"},[R,b(" Restore ")]),i(j,{show:r.value,message:u.$t("restore_file_confirm"),onCancel:c,onConfirm:v},null,8,["show","message"])],64))}},T=l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-2"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),G={__name:"DeleteForeverButton",props:{allSelected:{type:Boolean,required:!1,default:!1},selectedIds:{type:Array,required:!1}},emits:["delete"],setup(h,{emit:n}){const e=h;B();const t=V({all:null,ids:[],parent_id:null}),r=m(!1);function a(){if(!e.allSelected&&!e.selectedIds.length){$("Please select at least one file to delete");return}r.value=!0}function c(){r.value=!1}function v(){e.allSelected?(t.all=!0,t.ids=[]):t.ids=e.selectedIds,t.delete(route("file.deleteForever"),{onSuccess:()=>{r.value=!1,n("delete"),I("Selected files have been deleted forever")}})}return(u,x)=>(p(),g(w,null,[l("button",{onClick:a,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-blue-500 dark:focus:text-white mr-3"},[T,b(" "+f(u.$t("delete_forever")),1)]),i(j,{show:r.value,message:u.$t("delete_confirm"),onCancel:c,onConfirm:v},null,8,["show","message"])],64))}},H={class:"flex items-center justify-end p-1 mb-3"},J={class:"flex-1 overflow-auto"},K={class:"min-w-full"},Q={class:"bg-gray-100 border-b"},W={class:"text-sm font-medium text-gray-900 px-6 py-4 text-left w-[30px] max-w-[30px] pr-0"},X={class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},Y={class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"},Z=["onClick"],ee={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 w-[30px] max-w-[30px] pr-0"},te={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 flex items-center"},le={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},se={key:0,class:"py-8 text-center text-sm text-gray-400"},he={__name:"Trash",props:{files:Object,folder:Object,ancestors:Object},setup(h){const n=h,e=m(!1),t=m({}),r=m(null),a=m({data:n.files.data,next:n.files.links.next}),c=M(()=>Object.entries(t.value).filter(s=>s[1]).map(s=>s[0]));function v(){console.log("load more"),console.log(a.value.next),a.value.next!==null&&U(a.value.next).then(s=>{a.value.data=[...a.value.data,...s.data],a.value.next=s.links.next})}function u(){a.value.data.forEach(s=>{t.value[s.id]=e.value})}function x(s){t.value[s.id]=!t.value[s.id],k(s)}function k(s){if(!t.value[s.id])e.value=!1;else{let d=!0;for(let o of a.value.data)if(!t.value[o.id]){d=!1;break}e.value=d}}function y(){e.value=!1,t.value={}}return A(()=>{a.value={data:n.files.data,next:n.files.links.next}}),D(()=>{new IntersectionObserver(d=>d.forEach(o=>o.isIntersecting&&v()),{rootMargin:"-250px 0px 0px 0px"}).observe(r.value)}),(s,d)=>(p(),q(F,null,{default:L(()=>[l("nav",H,[l("div",null,[i(G,{"all-selected":e.value,"selected-ids":C(c),onDelete:y},null,8,["all-selected","selected-ids"]),i(P,{"all-selected":e.value,"selected-ids":C(c),onRestore:y},null,8,["all-selected","selected-ids"])])]),l("div",J,[l("table",K,[l("thead",Q,[l("tr",null,[l("th",W,[i(S,{onChange:u,checked:e.value,"onUpdate:checked":d[0]||(d[0]=o=>e.value=o)},null,8,["checked"])]),l("th",X,f(s.$t("name")),1),l("th",Y,f(s.$t("path")),1)])]),l("tbody",null,[(p(!0),g(w,null,N(a.value.data,o=>(p(),g("tr",{key:o.id,onClick:_=>x(o),class:E(["border-b transition duration-300 ease-in-out hover:bg-blue-100 cursor-pointer",t.value[o.id]||e.value?"bg-blue-50":"bg-white"])},[l("td",ee,[i(S,{onChange:_=>k(o),modelValue:t.value[o.id],"onUpdate:modelValue":_=>t.value[o.id]=_,checked:t.value[o.id]||e.value},null,8,["onChange","modelValue","onUpdate:modelValue","checked"])]),l("td",te,[i(z,{file:o},null,8,["file"]),b(" "+f(o.name),1)]),l("td",le,f(o.path),1)],10,Z))),128))])]),a.value.data.length?O("",!0):(p(),g("div",se,f(s.$t("folder_is_empty")),1)),l("div",{ref_key:"loadMoreIntersect",ref:r},null,512)])]),_:1}))}};export{he as default};
